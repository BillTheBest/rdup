'\" t
.TH RESTORE.SH 8 "14 Mar 2006" "@PACKAGE_VERSION@" "@PACKAGE_NAME@ utils"

.SH NAME
restore.sh \- restore a filesystem from a specific directory

.SH SYNOPSIS
.B restore.sh
[
.IR OPTIONS
]
[
+DAY
]
.IR \-t
.IR TO_DIR
FROM_DIR
[
FROM_DIR ...
]

.SH DESCRIPTION
\fBrestore.sh\fR is a frontend for `rorrim.sh', `monthday.sh' and `rdup'. It will
restore everything under \fIFROM_DIR\fRs to \fITO_DIR\fR.

.PP
For the \fI+DAY\fR argument, see the rorrim.sh(8) manual page.

.PP
Restoring from a backup is as simple as:
      restore.sh \-t /tmp/home /vol/backup/elektron/200604/home

Note: The restored files "inherit" the `/vol/backup/elektron/200604'
prefix. So the restored files are found in the directory:
`/tmp/home/vol/backup/elektron/200604/home'. You can chop off those
first few path components with the \-p switch.

.SH OPTIONS
.TP
.B \-t TO_DIR
This option is mandatory. It specifies the directory where the backup
should be restored in.
.TP
.B \-c user@remotehost
Pull a backup from a remote host. This will create a pipeline of the
form: 

ssh \fIuser@remotehost\fR rdup \-c /dev/null \fIFROM_DIR\fR |
montday.sh \-c \fI+DAY\fR | rorrim.sh \-c \fITO_DIR\fR

There is no provisioning for \fBssh\fR so unless you have configured
\fBssh\fR to work without a passphrase you will be asked to supply one.
Also note that the PATH on the remote host should be set in such a way that all
the rdup-util scripts can be found.
.TP
.B \-k keyfile
Decrypt the files while restoring with \fIkeyfile\fR. This option
inserts \fBcrypt.sh \-d keyfile\fR in the pipeline. If both \fI\-z\fR and
\fI\-k\fR are given a file is first decrypted and then unzipped. This 
is ofcourse the opposite of what \fBdump.sh\fR does.
.TP
.B \-z
Decompress the files while restoring. This option
inserts \fBgzip.sh \-d\fR in the pipeline. If both \fI\-z\fR and
\fI\-k\fR are given a file is first decrypted and then unzipped. This 
is ofcourse the opposite of what \fBdump.sh\fR does.
.TP
.B \-a
Enable extended attributes. Rad the uid/gid to the extended user
attributes r_uid and r_gid.
.TP
.B -l num
Limit the transfer to 'num' bytes/second. This option is given to
\fBcstream\fR. See the manual page of cstream at the \-t option.
.TP
.B \-p NUM
Strip NUM leading components of the file names. See rorrim.sh(8) for
more details.
.TP
.B \-v
Echo the files processed to standard error.
.TP
.B \-h
Show a short help message.
.TP
.B \-V
Show the version.

.SH EXAMPLES

.SS LOCAL RESTORE
Restoring from my local backup:

        restore.sh -t /tmp/restore /vol/backup/elektron/200604/home/miekg/bin


.SS REMOTE RESTORE
Restoring from a remote server:

         restore.sh -c miekg@remote -t /tmp/restore ~/bin


.SH SEE ALSO
hist.sh(1), yesterday.sh(1) and rdup(8).
