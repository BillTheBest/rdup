'\" t
.TH RDUP-RESTORE 8 "14 Mar 2006" "@PACKAGE_VERSION@" "@PACKAGE_NAME@ utils"

.SH NAME
rdup-restore \- restore a filesystem from a specific directory

.SH SYNOPSIS
.B rdup-restore
[
.IR OPTIONS
]
.IR \-b
.IR TO_DIR
FROM_DIR
[
FROM_DIR ...
]

.SH DESCRIPTION
\fBrdup-restore\fR is a frontend for `rdup-mirror' and `rdup'. It will
restore everything under \fIFROM_DIR\fRs to \fITO_DIR\fR.

.PP
With this script you can only restore to the latest state of your
backup. If you need something better (for backing up) see
rdup-snapshot(8).

.PP
Restoring from a backup is as simple as:
      rdup-restore \-t /tmp/home /vol/backup/elektron/200604/home

Note: The restored files "inherit" the `/vol/backup/elektron/200604'
prefix. So the restored files are found in the directory:
`/tmp/home/vol/backup/elektron/200604/home'.

.SH OPTIONS
.TP
.B \-b TO_DIR
This option is mandatory. It specifies the directory where the backup
should be restored in.
.TP
.B \-c user@remotehost
Pull a backup from a remote host. This will create a pipeline of the
form: 

ssh \fIuser@remotehost\fR rdup \-c /dev/null \fIFROM_DIR\fR |
rdup-mirror \-c \fITO_DIR\fR

There is no provisioning for \fBssh\fR so unless you have configured
\fBssh\fR to work without a passphrase you will be asked to supply one.
Also note that the PATH on the remote host should be set in such a way that all
the rdup-utils can be found.
.TP
.B \-k keyfile
Decrypt the files while restoring with \fIkeyfile\fR. This option
inserts \fBrdup-crypt \-d keyfile\fR in the pipeline. If both \fI\-z\fR and
\fI\-k\fR are given they are performed in the order they are given. 
.TP
.B \-z
Decompress the files while restoring. This option
inserts \fBrdup-gzip \-d\fR in the pipeline. If both \fI\-z\fR and
\fI\-k\fR are given a file is first decrypted and then unzipped. This 
is ofcourse the opposite of what \fBrdup-dump\fR does.
.TP
.B \-a
Enable extended attributes. Rad the uid/gid to the extended user
attributes r_uid and r_gid.
.TP
.B \-v
Echo the files processed to standard error.
.TP
.B \-h
Show a short help message.
.TP
.B \-V
Show the version.

.SH EXAMPLES

.SS LOCAL RESTORE
Restoring from my local backup:

        rdup-restore -b /tmp/restore /vol/backup/elektron/200604/home/miekg/bin

.SS REMOTE RESTORE
Restoring from a remote server:

         rdup-restore -c miekg@remote -b /tmp/restore ~/bin


.SH SEE ALSO
rdup(8), rdup-snapshot(8) and rdup-mirror(8)
